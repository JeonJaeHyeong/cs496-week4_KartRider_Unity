# cs496-week4
### Abstraction
#### Unity를 이용한 3D 레이싱 게임   
![부스터+아이템 대표](https://user-images.githubusercontent.com/71118232/106248345-302d9280-6254-11eb-93a9-82ed48a28234.gif)

- Photon과 RPC를 이용한 멀티 플레이 기능
- Firebase를 이용한 계정 인증 기능
- 각종 아이템(바나나, 구름, 미사일, 물폭탄) 기능
기존 게임인 넥슨의 카트라이더 게임의 아이템전의 형태를 이용하였다.   
사용한 unity asset은 Karting Microgame, Low Poly Mini Village Free, US Road Signs Free 이다.   
카트의 기본 movement과 그래픽만을 asset에서 사용하고, 이외의 기능은 모두 구현하였다. 
![드리프트](https://user-images.githubusercontent.com/71118232/106248409-489dad00-6254-11eb-926f-cefcd9d57a7e.gif)
![부스터](https://user-images.githubusercontent.com/71118232/106248412-4a677080-6254-11eb-98db-7187be524c1f.gif)
### 기능
#### 1) 로그인 기능
firebase와 연동하여, firebase 내에 저장된 계정으로만 로그인이 가능하도록 하였다.
#### 2) 맵 선택 기능
두 가지 맵 중 하나를 선택할 수 있다.
맵을 선택하면, 해당하는 맵의 로비로 이동한다.   
![캡처_2021_01_29_17_08_45_554](https://user-images.githubusercontent.com/71118232/106248650-a03c1880-6254-11eb-909b-6f7e77edebbc.png)
#### 3) 로비 기능
자신의 캐릭터를 확인할 수 있다.   
my room으로 이동하면 캐릭터와 카트의 색상을 변경할 수 있다.   
변경한 색은 게임 중에 적용되며, 다른 플레이어의 색상도 해당 플레이어가 설정한대로 적용된다.   
![색변경](https://user-images.githubusercontent.com/71118232/106249174-5bfd4800-6255-11eb-966e-f4a47b478cfd.gif)
#### 4) 게임 화면
게임은 최대 4명까지 참여가능하다.   
게임에 가장 처음 입장하면 master client가 되고, master client에게만 start button이 활성화된다.   
master client가 start button을 클릭하면 모든 플레이어의 화면에서 동시에 숫자가 카운트되고 게임이 시작한다.   
게임 시작 전에는 움직임이 비활성화된다.   
![시작](https://user-images.githubusercontent.com/71118232/106248432-50f5e800-6254-11eb-8da6-a77220e3ca4d.gif)
##### i) 미니맵
좌측에 전체 미니맵이 나타난다.    
이는 맵의 위에 있는 보조카메라로 track과 player만 표시하도록 설정하여 제작하였다.   
자신의 캐릭터의 위치는 빨간색으로, 다른 플레이어들의 위치는 파란색으로 나타난다.
##### ii) 실시간 순위표
좌측 하단에 순위표가 실시간으로 변동된다.   
트랙을 감싸고 있는 체크포인트를 이용하여 순위 계산 알고리즘을 구현하였다.
##### iii) 속도계
하단 중앙에 현재 자신의 플레이어의 속도가 나타난다.
##### iiii) 부스터바
왼쪽 하단에 부스터바가 존재한다.   
앞으로 나아갈 때마다 부스터바가 점점 차고, 부스터바가 모두 차면 부스터가 생성된다.   
부스터는 최대 3개까지 생성되며, 부스터가 있을 때는 ctrl을 눌러서 부스터를 사용할 수 있다.
##### v) 아이템 박스
맵의 곳곳에 위치하는 아이템 박스에 충돌하면 collision이 발생하면서 아이템을 얻게 된다.   
이 때 아이템은 바나나, 구름, 미사일, 물폭탄 중 랜덤하게 생성된다.   
아이템은 최대 1개를 보유할 수 있으므로 아이템을 사용하지 않은 상태에서 다른 아이템을 먹으면 아이템 상태가 업데이트된다.   
바나나를 사용하면 맵 위에 바나나가 initiate되고, 이와 충돌하면 플레이어가 3초간 회전하고 바나나는 destroy된다.   
구름을 사용하면 자신을 제외한 모든 플레이어의 화면에 큰 구름이 나타난다.   
미사일을 사용하면 미사일 조준 바가 상단에 나타나고, 조준에 성공하면 자신을 제외한 모든 플레이어가 회전하면서 위로 올라간다.   
물폭탄을 사용하면 맵 위에 물방울이 initiate되고, 이와 충돌하면 플레이어가 물방울에 갇히면서 회전한다.
##### vi) 나가기
나가기 버튼을 누르면 로비로 이동할 수 있고, 로비에서 나가기 버튼을 누르면 맵 선택 화면으로 이동할 수 있다.
##### vii) 기타
맵 중간에 돌이 굴러 떨어지는 구간이 존재한다.   
스피드 패드를 밟으면 자신의 현재 속도의 1.5배가 된다.   
점프대를 이용하여 끊긴 구간을 주행할 수 있다.   
![돌굴리기](https://user-images.githubusercontent.com/71118232/106248393-43d8f900-6254-11eb-97cf-b70b99550c63.gif)
![스피드패드](https://user-images.githubusercontent.com/71118232/106248418-4c313400-6254-11eb-806f-d139bdda181b.gif)
![점프대](https://user-images.githubusercontent.com/71118232/106248423-4dfaf780-6254-11eb-8555-aa58d79db468.gif)
